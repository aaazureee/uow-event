<!DOCTYPE html>
<html lang="en">

<head>
  <title>Manage Events - Event Booking System</title>
  <%- include partials/html-head %>
</head>

<body class="home-page">
  <%- include partials/navbar %>

    <!-- Begin page content -->
    <main class="container manage">
      <header class="title mt-3 mb-0">Manage Events</header>
      <form action="/manage-events" class="form-inline mb-3">
        <label for="filter-events">Showing</label>
        <select name="filter_type" class="form-control custom-select ml-0 ml-sm-2" id="filter-events" data-selected="<%= filter_type %>">
          <option value="all">All Events</option>
          <option value="past">Past Events</option>
          <option value="upcoming">Upcoming Events</option>
        </select>
      </form>
      <!-- Modal -->
      <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="deleteLabel">Delete Confirmation</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              Are you sure you want to delete this event?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-danger delete">Delete</button>
              <button type="button" class="btn btn-secondary ml-auto" data-dismiss="modal">Cancel</button>
            </div>
          </div>
        </div>
      </div>
      <!-- Display list of cards -->
      <div class="row">
        <% for (let event of events) { %>
          <div class="col-lg-6 my-3">
            <div class="card">
              <h5 class="card-header d-flex align-items-center justify-content-between">
                <a href="/event/id/<%= event.eventId %>" class="text-primary">
                  <%= event.eventName %>
                </a>
                <a href="/event/update/id/<%= event.eventId %>" class="btn btn-sm btn-secondary ml-auto">Edit</a>
                <button class="toggle btn btn-sm btn-danger ml-2" data-toggle="modal" data-target="#deleteModal" data-href="/event/delete/id/
                <%= event.eventId %>">Delete</button>
              </h5>
              <div class="card-body d-flex flex-column justify-content-between">
                <p class="card-text">
                  <%= event.summary %>
                </p>
                <div class="info">
                  <div class="mb-2">
                    <i class="far fa-calendar-alt">
                      <span class="font-italic">
                        <%= event.durationString %>
                      </span>
                    </i>
                  </div>
                  <div class="mb-2">
                    <i class="fas fa-map-marker-alt">
                      <span class="font-italic">
                        <%= event.address %>
                      </span>
                    </i>
                  </div>
                  <div class="mb-2">
                    <i class="fas fa-dollar-sign">
                      <span class="font-italic">
                        <%= event.price %>
                      </span>
                    </i>
                  </div>
                  <a href="#" class="btn btn-primary book-in">Book In</a>
                </div>
              </div>
            </div>
          </div>
          <% } %>
      </div>
    </main>

    <!-- Sticky Footer -->
    <%- include partials/footer %>

      <!-- Bootstrap core JavaScript
    ================================================== -->
      <!-- Placed at the end of the document so the pages load faster -->
      <%- include partials/html-scripts %>
        <script src="/assets/delete-manage-page.js"></script>
</body>

</html>